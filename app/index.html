<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>动漫小站</title>
    <script src="./dist/jquery-2.2.4.js"></script>
    <link rel="stylesheet" href="./font/font-awesome-4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    <div class="header">
       <div class="search">
         <input id="keyboard" type="text" name="Txt" autofocus="true" placeholder="搜索感兴趣的动漫" onkeydown="keySearch()" />
         <i id="search" class="fa fa-search" aria-hidden="true" onclick="search()"></i>
       </div>
    </div>
    <div class="listBox">
      <ul id="list">
      </ul>
    </div>
</body>
<script>
function search(data){
    var list = document.getElementById('list')
    list.innerHTML = ""
	 $.ajax({
         type: "post",
         async: false,
         url: "http://104.168.165.226:12345/search",
         dataType: "json",
         data: JSON.stringify(data),
         success: function (res) {
             for(var i=0;i<res.length;i++){
                 let  oLi = document.createElement("li")
                 oLi.innerHTML = `
			<a href="${res[i].url}" target="con">
			    <div class="box">
			        <div><img src="${res[i].img}" onerror="this.src='./template/images/default_grey_pc.png'"></div>
			        <div class="detail">
				        <div class="title">${res[i].title}</div>
				        <div class="from">来源:<text class="from-detail">${res[i].from}</text></div>
			        </div>
			    </div>
			</a>`;
                 list.appendChild(oLi)
             }
         },
         error: function (e) {
             var test = e;
         }
     });
}

function keySearch(){
	 if (event.keyCode == 13){
	     let txt = $("#keyboard").val();
         let data = {"txt":txt};
		 search(data)
	 }
}
</script>
</html>